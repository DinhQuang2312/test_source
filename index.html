<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ƒê√™m Trung Thu Th·∫£ ƒê√®n L·ªìng üéÜ</title>
		<style>
			body {
				margin: 0;
				overflow: hidden;
				background: radial-gradient(circle at bottom, #0b132b, #030712);
				height: 100vh;
				position: relative;
				font-family: 'Segoe UI', sans-serif;
			}

			.lantern {
				position: absolute;
				background: radial-gradient(ellipse at center, #ffad33 0%, #ff6600 80%);
				border-radius: 50% 50% 45% 45% / 55% 55% 40% 40%;
				box-shadow: 0 0 20px rgba(255, 150, 50, 0.8),
					0 0 60px rgba(255, 120, 0, 0.5);
				cursor: pointer;
				transition: transform 0.3s;
				animation: swing 3s ease-in-out infinite alternate;
			}

			.lantern::after {
				content: '';
				position: absolute;
				bottom: -15px;
				left: 50%;
				width: 12px;
				height: 12px;
				background: #ff6600;
				border-radius: 50%;
				transform: translateX(-50%);
				box-shadow: 0 0 10px rgba(255, 180, 0, 0.7);
			}

			.lantern:hover {
				transform: scale(1.1);
			}

			@keyframes swing {
				0% {
					transform: rotate(-3deg);
				}
				100% {
					transform: rotate(3deg);
				}
			}

			@keyframes floatUp {
				0% {
					transform: translateY(100vh) translateX(0);
					opacity: 0;
				}
				10% {
					opacity: 1;
				}
				100% {
					transform: translateY(-120vh) translateX(var(--move-x));
					opacity: 0.7;
				}
			}

			.popup {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%) scale(0);
				background: rgba(0, 0, 0, 0.9);
				color: #fff;
				border-radius: 16px;
				padding: 24px 32px;
				box-shadow: 0 0 20px rgba(255, 180, 0, 0.6);
				text-align: center;
				transition: transform 0.4s ease;
				z-index: 999;
				max-width: 90%;
				max-height: 80%;
				overflow-y: auto;
				line-height: 1.6;
				font-size: 18px;
				font-weight: 500;
				letter-spacing: 0.5px;
				min-width: 250px;
			}

			.popup.show {
				transform: translate(-50%, -50%) scale(1);
			}

			.popup button {
				margin-top: 16px;
				padding: 8px 16px;
				border: none;
				background: #ff9500;
				color: white;
				border-radius: 8px;
				cursor: pointer;
			}

			.moon {
				position: absolute;
				top: 40px;
				right: 60px;
				width: 100px;
				height: 100px;
				background: radial-gradient(circle at 30% 30%, #fffbe6, #f7e8a4);
				border-radius: 50%;
				box-shadow: 0 0 30px rgba(255, 255, 180, 0.7);
			}

			.stars {
				position: absolute;
				width: 100%;
				height: 100%;
				pointer-events: none;
				overflow: hidden;
			}

			.star {
				position: absolute;
				background: white;
				border-radius: 50%;
				opacity: 0.8;
				animation: twinkle 3s infinite ease-in-out;
			}

			@keyframes twinkle {
				0%,
				100% {
					opacity: 0.2;
					transform: scale(0.9);
				}
				50% {
					opacity: 1;
					transform: scale(1.1);
				}
			}

			/* Mobile Responsive */
			@media (max-width: 768px) {
				.moon {
					width: 80px;
					height: 80px;
					right: 30px;
					top: 20px;
				}
				.popup {
					padding: 16px 20px;
					font-size: 16px;
				}
				.popup button {
					padding: 6px 12px;
					font-size: 13px;
				}
			}
			@media (max-width: 480px) {
				.moon {
					width: 60px;
					height: 60px;
					right: 20px;
				}
				.popup {
					font-size: 14px;
					padding: 12px 16px;
				}
			}
		</style>
	</head>
	<body>
		<div class="stars"></div>
		<div class="moon"></div>

		<div class="popup" id="popup">
			<h2>üåï Ch√∫c em c√≥ m·ªôt m√πa Trung Thu Vui V·∫ª !</h2>
			<p id="poem"></p>
			<div
				id="icon"
				style="
					text-align: center;
					font-size: 40px;
					margin-top: 10px;
					opacity: 0;
					transition: opacity 0.5s;
				"
			>
				<img
					src="https://marketplace.canva.com/NXurQ/MAF_RMNXurQ/1/tl/canva-cute-rabbit-decoration-MAF_RMNXurQ.png"
					alt=""
					style="width: 100%"
				/>
			</div>
			<button onclick="closePopup()">ƒê√≥ng</button>
		</div>

		<audio
			id="midAutumnMusic"
			src="./em-trang-sang-cung-vui-trung-thu-410366.mp3"
			loop
		></audio>

		<script>
			const popup = document.getElementById('popup');
			const music = document.getElementById('midAutumnMusic');

			window.addEventListener('load', () => {
				const playPromise = music.play();
				if (playPromise !== undefined) {
					playPromise.catch(error =>
						console.log('Nh·∫°c s·∫Ω ph√°t khi ng∆∞·ªùi d√πng click')
					);
				}
			});
			music.volume = 0.4;

			// Th∆° l·ª•c b√°t
			const poemLines = [
				'TrƒÉng R·∫±m s√°ng t·ªè lung linh,',
				'Gi√≥ ƒë∆∞a h∆∞∆°ng c·ªëm th·∫≠t t√¨nh.',
				'Nh·ªõ th∆∞∆°ng em ƒë√£ b·∫•y l√¢u,',
				'Trung thu b√™n em nguy·ªán c·∫ßu.',
				'Tay trong tay ng·∫Øm trƒÉng thanh,',
				'Ng·ªçt ng√†o nh∆∞ chi·∫øc b√°nh xanh.'
			];

			function getRandomRGB() {
				const r = Math.floor(Math.random() * 256);
				const g = Math.floor(Math.random() * 256);
				const b = Math.floor(Math.random() * 256);
				return `rgb(${r},${g},${b})`;
			}

			function showPoem() {
				const poemContainer = document.getElementById('poem');
				const icon = document.getElementById('icon');
				poemContainer.innerHTML = '';
				icon.style.opacity = 0; // ·∫©n icon ban ƒë·∫ßu
				let delay = 0;
				poemLines.forEach(line => {
					const lineDiv = document.createElement('div');
					lineDiv.style.display = 'block';
					line.split(' ').forEach(word => {
						const span = document.createElement('span');
						span.textContent = word + ' ';
						span.style.opacity = 0;
						span.style.transition = 'opacity 0.3s, color 0.3s';
						lineDiv.appendChild(span);
						setTimeout(() => {
							span.style.opacity = 1;
							span.style.color = getRandomRGB();
						}, delay);
						delay += 300; // 0.3s gi·ªØa c√°c t·ª´
					});
					poemContainer.appendChild(lineDiv);
				});

				// Hi·ªÉn th·ªã icon sau khi to√†n b·ªô t·ª´ ƒë√£ ch·∫°y xong
				setTimeout(() => {
					icon.style.opacity = 1;
				}, delay);
			}

			// Lantern
			function createLantern() {
				const lantern = document.createElement('div');
				lantern.classList.add('lantern');

				const left = Math.random() * window.innerWidth;
				const delay = Math.random() * 3;
				const duration = 12 + Math.random() * 8;
				const moveX = (Math.random() - 0.5) * 150 + 'px';

				const isMobile = window.innerWidth < 768;
				const size = isMobile
					? 40 + Math.random() * 30
					: 60 + Math.random() * 50;

				lantern.style.left = `${left}px`;
				lantern.style.width = `${size}px`;
				lantern.style.height = `${size * 1.3}px`;
				lantern.style.setProperty('--move-x', moveX);
				lantern.style.animation = `floatUp ${duration}s linear ${delay}s infinite`;

				lantern.addEventListener('click', () => {
					popup.classList.add('show');
					music.play();
					showPoem();
				});

				document.body.appendChild(lantern);
			}

			// Stars
			function createStars() {
				const stars = document.querySelector('.stars');
				const numStars = window.innerWidth < 768 ? 40 : 80;
				for (let i = 0; i < numStars; i++) {
					const s = document.createElement('div');
					s.classList.add('star');
					const size = Math.random() * 2 + 1;
					s.style.width = `${size}px`;
					s.style.height = `${size}px`;
					s.style.top = `${Math.random() * 100}%`;
					s.style.left = `${Math.random() * 100}%`;
					s.style.animationDelay = `${Math.random() * 3}s`;
					stars.appendChild(s);
				}
			}

			function closePopup() {
				popup.classList.remove('show');
				music.pause();
			}

			// T·∫°o lantern
			const lanternCount =
				window.innerWidth < 480 ? 8 : window.innerWidth < 768 ? 12 : 18;
			for (let i = 0; i < lanternCount; i++) createLantern();

			createStars();
		</script>
	</body>
</html>
